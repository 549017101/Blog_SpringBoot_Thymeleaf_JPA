<!DOCTYPE html>
<!--
  author pxz
  email buffll@foxmail.com
-->
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
  <head th:replace="/commons/fragments :: head(~{::title})">
    <title>博客详情</title>
  </head>
  <style>
    p {
      text-indent: 2em;
    }
  </style>

  <body>
    <!--导航-->
    <div th:replace="/commons/fragments :: navigation(0)"></div>

    <!--中间内容-->
    <div id="waypoint" class="m-container-small m-padded-tb-big animated fadeIn">
      <div class="ui container">

        <div class="ui top attached segment">
          <div class="ui horizontal link list">
            <div class="item">
              <img th:src="@{${blog_details.user.avatar}}" alt="" class="ui avatar image">
              <div class="content"><a th:href="@{${blog_details.user.nickname}}" class="header"></a></div>
            </div>
            <div class="item">
              <i class="calendar icon"></i>
              <span th:text="${#dates.format(blog_details.updateTime,'yyyy-MM-dd')}"></span>
            </div>
            <div class="item">
              <i class="eye icon"></i>
              <span th:text="${blog_details.views}"></span>
            </div>
          </div>
        </div>

        <div class="ui attached segment">
          <!--图片区域-->
          <img th:src="@{${blog_details.firstPicture}}" class="ui fluid rounded image" style="height: 300px;">
        </div>

        <div class="ui  attached padded segment">
          <!--内容-->
          <div class="ui right aligned basic segment">
            <div class="ui orange basic label" th:text="${blog_details.flag}"></div>
          </div>
          <h2 class="ui center aligned header" th:text="${blog_details.title}"></h2>
          <br>

          <div id="content" th:utext="${blog_details.content}"
               class="typo typo-selection js-toc-content m-padded-lr-responsive m-padded-tb-large"></div>

          <!--标签-->
          <div class="m-padded-lr-responsive">
            <div class="ui basic teal left pointing label"
                 th:each="tag : ${blog_details.tags}" th:text="${tag.name}"></div>
          </div>

          <!--赞赏-->
          <div class="ui center aligned basic segment">
            <button id="payButton" class="ui orange basic circular button">赞赏</button>
          </div>
          <div class="ui payQR flowing popup transition hidden">
            <div class="ui orange basic label">
              <div class="ui images" style="font-size: inherit !important;">
                <div class="image">
                  <img th:src="@{/img/zfb.png}" alt="" class="ui rounded bordered image" style="width: 120px">
                  <div>支付宝</div>
                </div>
                <div class="image">
                  <img th:src="@{/img/vxskm.png}" alt="" class="ui rounded bordered image" style="width: 120px">
                  <div>微信</div>
                </div>
              </div>
            </div>
          </div>

        </div>
        <div class="ui attached positive message">
          <!--博客信息-->
          <div class="ui middle aligned grid">

            <div class="eleven wide column">
              <ui class="list">
                <li>
                  作者：<span th:text="${blog_details.user.nickname}"></span>
                  <a th:href="@{/about}" target="_blank">（联系作者）</a>
                </li>
                <li>
                  发表时间：<span th:text="${#dates.format(blog_details.createTime,'yyyy-MM-dd HH:mm')}"></span>
                </li>
                <li>版权声明：自由转载-非商用-非衍生-保持署名（创意共享3.0许可证）</li>
                <li>公众号转载：请在文末添加作者二维码</li>
              </ui>
            </div>

            <div class="five wide column">
              <img th:src="@{/img/vx.png}" alt="" class="ui right floated rounded bordered image"
                style="width: 110px">
            </div>
          </div>
        </div>

        <div id="comment-container" class="ui bottom attached segment">
          <!--留言区域列表-->
          <div class="ui teal segment">
            <div class="ui threaded comments">
              <h3 class="ui dividing header">Comments</h3>
              <div class="comment">
                <a class="avatar">
                  <img class="photo" th:src="@{/img/photo/test1.jpeg}">
                </a>
                <div class="content">
                  <a class="author">Matt</a>
                  <div class="metadata">
                    <span class="date">Today at 5:42PM</span>
                  </div>
                  <div class="text">
                    How artistic!
                  </div>
                  <div class="actions">
                    <a class="reply">回复</a>
                  </div>
                </div>
              </div>
              <div class="comment">
                <a class="avatar">
                  <img class="photo" th:src="@{/img/photo/test2.jpeg}">
                </a>
                <div class="content">
                  <a class="author">Elliot Fu</a>
                  <div class="metadata">
                    <span class="date">Yesterday at 12:30AM</span>
                  </div>
                  <div class="text">
                    <p>This has been very useful for my research. Thanks as well!</p>
                  </div>
                  <div class="actions">
                    <a class="reply">回复</a>
                  </div>
                </div>
                <div class="comments">
                  <div class="comment">
                    <a class="avatar">
                      <img class="photo" th:src="@{/img/photo/test2.jpeg}">
                    </a>
                    <div class="content">
                      <a class="author">Jenny Hess</a>
                      <div class="metadata">
                        <span class="date">Just now</span>
                      </div>
                      <div class="text">
                        Elliot you are always so right :)
                      </div>
                      <div class="actions">
                        <a class="reply">回复</a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="comment">
                <a class="avatar">
                  <img class="photo" th:src="@{/img/photo/test3.jpg}">
                </a>
                <div class="content">
                  <a class="author">Joe Henderson</a>
                  <div class="metadata">
                    <span class="date">5 days ago</span>
                  </div>
                  <div class="text">
                    Dude, this is awesome. Thanks so much
                  </div>
                  <div class="actions">
                    <a class="reply">回复</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="ui form">
            <div class="field">
              <textarea name="content" placeholder="请输入评论信息..."></textarea>
            </div>
            <div class="fields">
              <div class="field m-mobile-wide m-margin-bottom-small">
                <div class="ui left icon input">
                  <i class="user icon"></i>
                  <input type="text" name="nickname" placeholder="姓名">
                </div>
              </div>
              <div class="field m-mobile-wide m-margin-bottom-small">
                <div class="ui left icon input">
                  <i class="mail icon"></i>
                  <input type="text" name="email" placeholder="邮箱">
                </div>
              </div>
              <div class="field  m-margin-bottom-small m-mobile-wide">
                <button class="ui teal button m-mobile-wide"><i class="edit icon"></i>发布</button>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>

    <div id="toolbar" class="m-padded m-fixed m-right-bottom" style="display: none">
      <div class="ui vertical icon buttons ">
        <button type="button" class="ui toc teal button">目录</button>
        <a href="#comment-container" class="ui teal button">留言</a>
        <button class="ui wechat icon button"><i class="weixin icon"></i></button>

        <div id="toTop-button" class="ui icon button">
          <i class="chevron up icon"></i>
        </div>
        <div id="toButtom-button" class="ui icon button">
          <i class="chevron down icon"></i>
        </div>
      </div>
    </div>

    <div class="ui toc-container flowing popup transition hidden" style="width: 250px!important;">
      <ol class="js-toc"></ol>
    </div>

    <div id="qrcode" class="ui wechat-qr flowing popup transition hidden " style="width: 130px !important;">
      <img th:src="@{/img/vx.png}" alt="" class="ui rounded image" style="width: 130px !important;">
    </div>
    <br>
    <br>
    <span id="myButtom"></span>
  
    <div th:replace="/commons/fragments :: footer"></div>
    <div th:replace="/commons/fragments :: script"></div>

    <script>
      $('.menu.toggle').click(function () {
        $('.m-item').toggleClass('m-mobile-hide')
      })

      tocbot.init({
        // Where to render the table of contents.
        tocSelector: '.js-toc',
        // Where to grab the headings to build the table of contents.
        contentSelector: '.js-toc-content',
        // Which headings to grab inside of the contentSelector element.
        headingSelector: 'h1, h2, h3',
      })

      //赞赏按钮浮动效果
      $('#payButton').popup({
        popup: $('.payQR.popup'),
        //on: 'click',
        position: 'bottom center'
      })

      //侧边栏目录按钮浮动效果
      $('.toc.button').popup({
        popup: $('.toc-container.popup'),
        on: 'click',
        position: 'left center'
      })

      //侧边栏微信按钮浮动效果
      $('.wechat').popup({
        popup: $('.wechat-qr'),
        position: 'left center'
      })

      // 扫描二维码在移动端阅读
      // var qrcode = new QRCode("qrcode", {
      //   //text: "../../static/img/vx.png",
      //   width: 110,
      //   height: 110,
      //   colorDark: "#000000",
      //   colorLight: "#ffffff",
      //   correctLevel: QRCode.CorrectLevel.H
      // })

      //移动到顶部
      $('#toTop-button').click(function () {
        $(window).scrollTo(0, 500)
      })

      //移动到底部
      $('#toButtom-button').click(function () {
        $(window).scrollTo(document.body.scrollHeight, 500)
      })
      
      let waypoint = new Waypoint({
        element: document.getElementById('waypoint'),
        handler: function (direction) {
          if (direction === 'down') {
            $('#toolbar').show(100);
          } else {
            $('#toolbar').hide(500);
          }
          //console.log('Scrolled to waypoint!  ' + direction);
        }
      })
    </script>
  </body>
</html>